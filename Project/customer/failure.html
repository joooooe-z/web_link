<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>支付失败 | Onerway</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card shadow">
                    <div class="card-body text-center p-5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-x-circle-fill text-danger mb-4" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                        </svg>
                        
                        <h2 class="mb-3">支付失败</h2>
                        <p class="text-muted mb-4">很抱歉，您的支付未能成功处理。</p>
                        
                        <div class="alert alert-danger">
                            <div id="errorMessage">支付处理过程中发生错误。</div>
                            <div class="mt-2 small">错误代码: <span id="errorCode">PL2001</span></div>
                        </div>
                        
                        <div class="d-grid gap-2 mt-4">
                            <a href="#" class="btn btn-primary" id="retryPayment">
                                重新支付
                            </a>
                            <a href="../index.html" class="btn btn-outline-secondary">
                                返回首页
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <p class="text-muted small">
                        如需帮助，请联系商家或发送邮件至 <a href="mailto:support@onerway.com">support@onerway.com</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取URL参数
            const urlParams = new URLSearchParams(window.location.search);
            const errorCode = urlParams.get('code') || 'PL2001';
            const errorMessage = urlParams.get('message') || '支付处理过程中发生错误。';
            const linkId = urlParams.get('id');
            
            // 显示错误信息
            document.getElementById('errorCode').textContent = errorCode;
            document.getElementById('errorMessage').textContent = errorMessage;
            
            // 设置重试按钮链接
            const retryButton = document.getElementById('retryPayment');
            if (linkId) {
                retryButton.href = `payment.html?id=${linkId}`;
            } else {
                retryButton.href = '../index.html';
                retryButton.textContent = '返回首页';
            }
        });
    </script>
</body>
</html> 